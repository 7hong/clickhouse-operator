apiVersion: "clickhouse.altinity.com/v1"
kind: "ClickHouseInstallation"
metadata:
  name: "settings-nested"
spec:
  configuration:
    settings:
      disable_internal_dns_cache: 1
    clusters:
      - name: "top-level"
        layout:
          shardsCount: 1
          replicasCount: 1
      - name: "cluster-level"
        settings:
          disable_internal_dns_cache: 2
        layout:
          shardsCount: 1
          replicasCount: 1
      - name: "shard-level"
        settings:
          disable_internal_dns_cache: 2
        layout:
          shards:
            - replicasCount: 1
              settings:
                disable_internal_dns_cache: 3
      - name: "replica-level"
        settings:
          disable_internal_dns_cache: 2
        layout:
          replicas:
            - shardsCount: 1
              settings:
                disable_internal_dns_cache: 3
      - name: "host-level"
        settings:
          disable_internal_dns_cache: 2
        layout:
          shards:
            - settings:
                disable_internal_dns_cache: 3
              replicas:
                - settings:
                    disable_internal_dns_cache: 4
